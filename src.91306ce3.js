parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"2S39":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.app=exports.h=exports.Lazy=void 0;var e=1,n=2,r=3,t={},o=[],i=o.map,l=Array.isArray,u="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout,f=function(e){var n="";if("string"==typeof e)return e;if(l(e)&&e.length>0)for(var r,t=0;t<e.length;t++)""!==(r=f(e[t]))&&(n+=(n&&" ")+r);else for(var t in e)e[t]&&(n+=(n&&" ")+t);return n},a=function(e,n){var r={};for(var t in e)r[t]=e[t];for(var t in n)r[t]=n[t];return r},s=function(e){return e.reduce(function(e,n){return e.concat(n&&!0!==n?"function"==typeof n[0]?[n]:s(n):0)},o)},c=function(e,n){return l(e)&&l(n)&&e[0]===n[0]&&"function"==typeof e[0]},d=function(e,n){if(e!==n)for(var r in a(e,n)){if(e[r]!==n[r]&&!c(e[r],n[r]))return!0;n[r]=e[r]}},p=function(e,n,r){for(var t,o,i=0,l=[];i<e.length||i<n.length;i++)t=e[i],o=n[i],l.push(o?!t||o[0]!==t[0]||d(o[1],t[1])?[o[0],o[1],o[0](r,o[1]),t&&t[2]()]:t:t&&t[2]());return l},v=function(e,n,r,t,o,i){if("key"===n);else if("style"===n)for(var l in a(r,t))r=null==t||null==t[l]?"":t[l],"-"===l[0]?e[n].setProperty(l,r):e[n][l]=r;else"o"===n[0]&&"n"===n[1]?((e.actions||(e.actions={}))[n=n.slice(2).toLowerCase()]=t)?r||e.addEventListener(n,o):e.removeEventListener(n,o):!i&&"list"!==n&&n in e?e[n]=null==t?"":t:null==t||!1===t||"class"===n&&!(t=f(t))?e.removeAttribute(n):e.setAttribute(n,t)},y=function(e,n,t){var o=e.props,i=e.type===r?document.createTextNode(e.name):(t=t||"svg"===e.name)?document.createElementNS("http://www.w3.org/2000/svg",e.name,{is:o.is}):document.createElement(e.name,{is:o.is});for(var l in o)v(i,l,null,o[l],n,t);for(var u=0,f=e.children.length;u<f;u++)i.appendChild(y(e.children[u]=w(e.children[u]),n,t));return e.node=i},h=function(e){return null==e?null:e.key},m=function(n,t,o,i,l,u){if(o===i);else if(null!=o&&o.type===r&&i.type===r)o.name!==i.name&&(t.nodeValue=i.name);else if(null==o||o.name!==i.name)t=n.insertBefore(y(i=w(i),l,u),t),null!=o&&n.removeChild(o.node);else{var f,s,c,d,p=o.props,g=i.props,z=o.children,x=i.children,C=0,k=0,A=z.length-1,L=x.length-1;for(var b in u=u||"svg"===i.name,a(p,g))("value"===b||"selected"===b||"checked"===b?t[b]:p[b])!==g[b]&&v(t,b,p[b],g[b],l,u);for(;k<=L&&C<=A&&null!=(c=h(z[C]))&&c===h(x[k]);)m(t,z[C].node,z[C],x[k]=w(x[k++],z[C++]),l,u);for(;k<=L&&C<=A&&null!=(c=h(z[A]))&&c===h(x[L]);)m(t,z[A].node,z[A],x[L]=w(x[L--],z[A--]),l,u);if(C>A)for(;k<=L;)t.insertBefore(y(x[k]=w(x[k++]),l,u),(s=z[C])&&s.node);else if(k>L)for(;C<=A;)t.removeChild(z[C++].node);else{b=C;for(var N={},E={};b<=A;b++)null!=(c=z[b].key)&&(N[c]=z[b]);for(;k<=L;)c=h(s=z[C]),d=h(x[k]=w(x[k],s)),E[c]||null!=d&&d===h(z[C+1])?(null==c&&t.removeChild(s.node),C++):null==d||o.type===e?(null==c&&(m(t,s&&s.node,s,x[k],l,u),k++),C++):(c===d?(m(t,s.node,s,x[k],l,u),E[d]=!0,C++):null!=(f=N[d])?(m(t,t.insertBefore(f.node,s&&s.node),f,x[k],l,u),E[d]=!0):m(t,s&&s.node,null,x[k],l,u),k++);for(;C<=A;)null==h(s=z[C++])&&t.removeChild(s.node);for(var b in N)null==E[b]&&t.removeChild(N[b].node)}}return i.node=t},g=function(e,n){for(var r in e)if(e[r]!==n[r])return!0;for(var r in n)if(e[r]!==n[r])return!0},w=function(e,r){return e.type===n?((!r||g(r.lazy,e.lazy))&&((r=e.lazy.view(e.lazy)).lazy=e.lazy),r):e},z=function(e,n,r,t,o,i){return{name:e,props:n,children:r,node:t,type:i,key:o}},x=function(e,n){return z(e,t,o,n,void 0,r)},C=function(n){return n.nodeType===r?x(n.nodeValue,n):z(n.nodeName.toLowerCase(),t,i.call(n.childNodes,C),n,void 0,e)},k=function(e){return{lazy:e,type:n}};exports.Lazy=k;var A=function(e,n){for(var r,o=[],i=[],u=arguments.length;u-- >2;)o.push(arguments[u]);for(;o.length>0;)if(l(r=o.pop()))for(u=r.length;u-- >0;)o.push(r[u]);else!1===r||!0===r||null==r||i.push("object"==typeof r?r:x(r));return n=n||t,"function"==typeof e?e(n,i):z(e,n,i,void 0,n.key)};exports.h=A;var L=function(e){var n={},r=!1,t=e.view,o=e.node,i=o&&C(o),f=e.subscriptions,a=[],c=function(e){v(this.actions[e.type],e)},d=function(e){return n!==e&&(n=e,f&&(a=p(a,s([f(n)]),v)),t&&!r&&u(y,r=!0)),n},v=(e.middleware||function(e){return e})(function(e,r){return"function"==typeof e?v(e(n,r)):l(e)?"function"==typeof e[0]?v(e[0],"function"==typeof e[1]?e[1](r):e[1]):(s(e.slice(1)).map(function(e){e&&e[0](v,e[1])},d(e[0])),n):d(e)}),y=function(){r=!1,o=m(o.parentNode,o,i,i="string"==typeof(i=t(n))?x(i):i,c)};v(e.init)};exports.app=L;
},{}],"oiAk":[function(require,module,exports) {
module.exports={btn:"_btn_984a1",btnActive:"_btnActive_984a1",pulse:"_pulse_984a1"};
},{}],"YWk7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("hyperapp"),t=r(require("./button.css"));function r(e){return e&&e.__esModule?e:{default:e}}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const a=({className:r,isActive:a,...s},u)=>{const o=a?t.default.btnActive:"",c=`${t.default.btn} ${r} ${o}`;return(0,e.h)("button",n({className:c},s),u)};var s=a;exports.default=s;
},{"hyperapp":"2S39","./button.css":"oiAk"}],"LQm7":[function(require,module,exports) {
module.exports={spinner:"_spinner_5687f",spin:"_spin_5687f"};
},{}],"eoZL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("hyperapp"),r=s(require("./spinner.css"));function s(e){return e&&e.__esModule?e:{default:e}}var t=({className:s,size:t=1,thickness:i=2})=>(0,e.h)("div",{className:`${r.default.spinner} ${s}`,style:{width:`${t}em`,height:`${t}em`,borderWidth:`${i}px`}});exports.default=t;
},{"hyperapp":"2S39","./spinner.css":"LQm7"}],"pyW+":[function(require,module,exports) {
module.exports={list:"_list_06052",row:"_row_06052",sliderContainer:"_sliderContainer_06052",slider:"_slider_06052",sliderEl:"_sliderEl_06052"};
},{}],"oVOw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("hyperapp"),t=a(require("./spinner.jsx")),n=a(require("./recordingList.css"));function a(e){return e&&e.__esModule?e:{default:e}}const r=({recordings:t,updateRecording:a})=>(0,e.h)("div",{className:n.default.list},t.map(t=>(0,e.h)(i,{recording:t,updateRecording:a}))),i=({recording:a,updateRecording:r})=>{const{url:i,createdAt:u,exportUrl:s,isExporting:l}=a;let c,d,p,m,g,v,h;const T=e=>(t,n)=>(e(n),t),f={gain:{min:0,max:10,step:.5,value:1,onInput:e=>{p.gain.setTargetAtTime(Number(e.target.value),d.currentTime,.01)}},pan:{min:-1,max:1,step:.1,value:0,onInput:e=>{m.pan.setTargetAtTime(Number(e.target.value),d.currentTime,.01)}},bass:{min:-50,max:50,step:.5,value:0,onInput:e=>{g.gain.setTargetAtTime(Number(e.target.value),d.currentTime,.01)}},mid:{min:-50,max:50,step:.5,value:0,onInput:e=>{v.gain.setTargetAtTime(Number(e.target.value),d.currentTime,.01)}},treble:{min:-50,max:50,step:.5,value:0,onInput:e=>{h.gain.setTargetAtTime(Number(e.target.value),d.currentTime,.01)}}};return(0,e.h)("div",{className:n.default.list},(0,e.h)("div",{className:n.default.row},(0,e.h)("audio",{src:i,controls:!0,onloadeddata:T(e=>{d=new AudioContext,c=e.target;const t=d.createMediaElementSource(c);p=d.createGain(),m=new StereoPannerNode(d,{pan:0}),(g=d.createBiquadFilter()).type="lowshelf",g.frequency.setValueAtTime(500,d.currentTime),(v=d.createBiquadFilter()).type="peaking",v.Q.setValueAtTime(Math.SQRT1_2,d.currentTime),v.frequency.setValueAtTime(1500,d.currentTime),(h=d.createBiquadFilter()).type="highshelf",h.frequency.setValueAtTime(3e3,d.currentTime),t.connect(p).connect(g).connect(v).connect(h).connect(m).connect(d.destination)})}),(0,e.h)("label",null,(0,e.h)("input",{type:"checkbox",onChange:T(({target:e})=>{c.loop=e.checked})}),"Loop"),s?(0,e.h)("a",{href:s,download:`recording-exported-${new Date(u).toLocaleString()}.webm`},"Download"):(0,e.h)("a",{href:"#",onClick:T(e=>{e.preventDefault(),r({...a,isExporting:!0});let t=[];const n=d.createMediaStreamDestination(),i=new MediaRecorder(n.stream);m.disconnect(d.destination),m.connect(n),c.pause(),c.loop=!1,c.currentTime=0,i.addEventListener("dataavailable",e=>{void 0!==e.data&&0!==e.data.size&&t.push(e.data)}),c.addEventListener("ended",function e(){c.removeEventListener("ended",e),i.stop()}),i.addEventListener("stop",()=>{const e=new Blob(t,{type:"audio/webm"}),i=URL.createObjectURL(e);t=[],m.disconnect(n),m.connect(d.destination),r({...a,exportUrl:i,isExporting:!1})}),i.start(),c.play()})},"Apply effects"),l&&(0,e.h)(t.default,null)),(0,e.h)("div",{className:n.default.row},Object.entries(f).map(([t,{min:n,max:a,step:r,value:i,onInput:u}])=>(0,e.h)(o,{name:t,min:n,max:a,step:r,value:i,onInput:T(u)}))))},o=({name:t,min:a,max:r,step:i,value:o,onInput:u})=>(0,e.h)("div",{className:n.default.sliderContainer},(0,e.h)("p",null,t),(0,e.h)("div",{className:n.default.slider},(0,e.h)("span",null,a),(0,e.h)("input",{className:n.default.sliderEl,type:"range",min:a,max:r,step:i,value:o,oninput:u}),(0,e.h)("span",null,r)));var u=r;exports.default=u;
},{"hyperapp":"2S39","./spinner.jsx":"eoZL","./recordingList.css":"pyW+"}],"X60D":[function(require,module,exports) {
module.exports={app:"_app_1a2c9"};
},{}],"tjt/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDispatch=n,exports.default=void 0;var e=require("hyperapp"),r=o(require("./button.jsx")),t=o(require("./recordingList.jsx")),i=o(require("./app.css"));function o(e){return e&&e.__esModule?e:{default:e}}let d;function n(e){d=e}function a(e){d(r=>({...r,...e}))}const c=({error:o,recorder:d,isRecording:n,recordings:c})=>{const s=n?"Stop recording":"Start recording";return(0,e.h)("div",{className:i.default.app},(0,e.h)("h1",null,"Media Recorder"),o&&(0,e.h)("h3",null,o),d?(0,e.h)(r.default,{isActive:n,onClick:e=>e.isRecording?(d.stop(),{...e,isRecording:!1}):(d.start(),{...e,isRecording:!0})},s):(0,e.h)(r.default,{onClick:e=>(u(),e)},"Get user media"),(0,e.h)(t.default,{recordings:c,updateRecording:e=>{const r=c.find(({createdAt:r})=>r===e.createdAt),t=c.indexOf(r);a({recordings:[...c.slice(0,t),{...e,updatedAt:Date.now()},...c.slice(t+1)]})}}))};var s=c;async function u(){return navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(l).catch(()=>{a({error:"You denied access to the microphone so this demo will not work."})})}function l(e){const r=new MediaRecorder(e,{type:"audio/webm"});a({recorder:r});let t=[];r.addEventListener("dataavailable",e=>{void 0!==e.data&&0!==e.data.size&&t.push(e.data)}),r.addEventListener("stop",()=>{const e=new Blob(t,{type:"audio/webm"}),r={url:URL.createObjectURL(e),createdAt:Date.now()};t=[],d(e=>({...e,recordings:e.recordings?[...e.recordings,r]:[r]}))})}exports.default=s;
},{"hyperapp":"2S39","./button.jsx":"YWk7","./recordingList.jsx":"oVOw","./app.css":"X60D"}],"D9Nj":[function(require,module,exports) {
module.exports={};
},{}],"H99C":[function(require,module,exports) {
"use strict";var e=require("hyperapp"),r=t(require("./components/app.jsx"));function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}require("./styles.css");const o={error:"",recorder:void 0,isRecording:!1,recordings:[]};(0,e.app)({init:o,view:r.default,node:document.getElementById("app-root"),subscriptions:e=>console.log("state",e),middleware:e=>((0,r.setDispatch)(e),e)});
},{"hyperapp":"2S39","./components/app.jsx":"tjt/","./styles.css":"D9Nj"}]},{},["H99C"], null)
//# sourceMappingURL=/recorder/src.91306ce3.js.map